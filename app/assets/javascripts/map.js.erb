$( document ).ready(function() {

  var rentifyOffice = {lat:51.519974, lng: -0.098398};
  var destinationPos = {lat: 51.520535, lng: -0.098430};

  map = new google.maps.Map(document.getElementById('map'), {
    center: rentifyOffice,
    zoom: 17
  });

  var home = new google.maps.Marker({
    position: rentifyOffice,
    map: map,
    animation: google.maps.Animation.DROP,
    title: 'Rentify Office',
    icon: "<%= asset_path('marker.png') %>"
  });
  home.addListener('click', toggleBounce);

  var destination = new google.maps.Marker({
    draggable: true,
    position: destinationPos,
    title:"Destination",
    animation: google.maps.Animation.DROP,
    icon: "<%= asset_path('marker-go.png') %>"
  });

  function toggleBounce() {
    if (home.getAnimation() !== null) {
      home.setAnimation(null);
    } else {
      home.setAnimation(google.maps.Animation.BOUNCE);
    }
  }

  $("#add-marker").on( "click", function() {
    destination.setMap(map);
  });

});